#!/bin/bash
set -e

default_packages="
bash-completion
git
htop
ncdu
tmux
tree
watch
"

# setup Centos
if which yum > /dev/null 2>&1; then
  yum install --assumeyes $default_packages

# setup Ubuntu
elif which apt-get > /dev/null 2>&1; then
  apt-get install --yes $default_packages

# setup Mac
elif [ "$(uname)" == "Darwin" ]; then
  if ! which brew > /dev/null 2>&1; then
    echo 'installing brew'

    $(which ruby) -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
  fi

  brew install $default_packages \
    awscli \
    heroku \
    python2 \
    python3 \
    rbenv

  brew cask install \
    bbc-iplayer-downloads \
    docker \
    google-backup-and-sync \
    google-chrome \
    keepassx \
    slack \
    virtualbox

  if [ -d "$HOME/Library/Mobile Documents/com~apple~CloudDocs" ]; then
    if [ ! -h "$HOME/iCloud Drive" ]; then
      ln -sfn "$HOME/Library/Mobile Documents/com~apple~CloudDocs" "$HOME/iCloud Drive"
    fi
  fi
else
  echo "can't find package manager"
  exit 1
fi
